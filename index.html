<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>7 Days of Us</title>

<style>
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: linear-gradient(#ffe6ef, #fff);
}

.app {
  max-width: 420px;
  margin: auto;
  padding: 20px;
}

h1 {
  text-align: center;
}

.days {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.card {
  padding: 18px;
  border-radius: 16px;
  background: white;
  box-shadow: 0 8px 20px rgba(0,0,0,.08);
  opacity: .5;
}

.card.active {
  opacity: 1;
  border: 2px solid #ff5c8a;
}

.card.done {
  opacity: 1;
}

button {
  margin-top: 12px;
  padding: 10px 16px;
  border-radius: 999px;
  border: none;
  background: #ff5c8a;
  color: white;
}

.game {
  margin-top: 12px;
}

.rose {
  font-size: 32px;
  cursor: pointer;
}

.hidden {
  display: none;
}

.message {
  margin-top: 12px;
  line-height: 1.5;
}
</style>
</head>

<body>
<div class="app">
  <h1>üíñ 7 Days of Us</h1>
  <p style="text-align:center" id="progress"></p>

  <div class="days" id="days"></div>
</div>

<script>
const START_DATE = new Date("2026-02-07"); // change if needed
const today = new Date();
const unlocked = Math.max(0, Math.min(
  Math.floor((today - START_DATE) / 86400000),
  6
));

let state = JSON.parse(localStorage.getItem("state")) || {
  completed: Array(7).fill(false),
  petals: 0
};

const days = [
  {
    title: "üåπ Rose Day",
    game(el, done) {
      el.innerHTML = `<p>Catch 3 roses</p>`;
      let count = 0;
      for (let i=0;i<5;i++){
        const r = document.createElement("span");
        r.className = "rose";
        r.innerText = "üåπ";
        r.onclick = () => {
          r.remove();
          count++;
          if(count === 3) done();
        };
        el.appendChild(r);
      }
    },
    message: "A rose for you. Just because you exist."
  },
  {
    title: "üíç Propose Day",
    game(el, done) {
      el.innerHTML = `<p>Choose what feels right</p>`;
      ["‚òï","üìò","üíç"].forEach(i=>{
        const s=document.createElement("span");
        s.className="rose";
        s.innerText=i;
        s.onclick=()=> i==="üíç" && done();
        el.appendChild(s);
      });
    },
    message: "Every day, I choose you."
  },
  {
    title: "üç´ Chocolate Day",
    game(el, done) {
      el.innerHTML = `<p>Build the chocolate</p>`;
      const b=document.createElement("button");
      b.innerText="Mix üç´";
      b.onclick=done;
      el.appendChild(b);
    },
    message: "Life is sweeter with you."
  },
  {
    title: "üß∏ Teddy Day",
    game(el, done) {
      el.innerHTML = `<p>Find the teddy</p>`;
      ["üì¶","ü™ë","üß∏"].sort(()=>.5-Math.random()).forEach(i=>{
        const s=document.createElement("span");
        s.className="rose";
        s.innerText=i;
        s.onclick=()=> i==="üß∏" && done();
        el.appendChild(s);
      });
    },
    message: "You make me feel safe."
  },
  {
    title: "ü§ù Promise Day",
    game(el, done) {
      el.innerHTML = `<p>Tap to promise</p>`;
      const b=document.createElement("button");
      b.innerText="I promise";
      b.onclick=done;
      el.appendChild(b);
    },
    message: "I promise effort, honesty, and us."
  },
  {
    title: "ü§ó Hug Day",
    game(el, done) {
      el.innerHTML = `<p>Hold for a hug</p>`;
      const b=document.createElement("button");
      b.innerText="ü§ç Hold";
      b.onmousedown=()=>setTimeout(done,800);
      el.appendChild(b);
    },
    message: "I wish I could hug you right now."
  },
  {
    title: "‚ù§Ô∏è Valentine‚Äôs Day",
    game(el, done) {
      el.innerHTML = `<p>Tap everything you‚Äôve collected</p>`;
      const final=document.createElement("div");
      final.innerText="üåπüíçüç´üß∏ü§ùü§ó";
      final.style.fontSize="32px";
      final.onclick=done;
      el.appendChild(final);
    },
    message: "This week was just a small version of how I feel about you. Will you be my Valentine?"
  }
];

const container = document.getElementById("days");
const progress = document.getElementById("progress");

function save() {
  localStorage.setItem("state", JSON.stringify(state));
}

function render() {
  container.innerHTML="";
  progress.innerText = `Days completed: ${state.completed.filter(Boolean).length}/7`;

  days.forEach((d,i)=>{
    const card=document.createElement("div");
    card.className="card";

    if(i<=unlocked) card.classList.add("active");
    if(state.completed[i]) card.classList.add("done");

    card.innerHTML=`<h3>${d.title}</h3>`;

    if(i===unlocked && !state.completed[i]) {
      const g=document.createElement("div");
      g.className="game";
      d.game(g, ()=>{
        state.completed[i]=true;
        save();
        render();
        alert(d.message);
      });
      card.appendChild(g);
    }

    if(state.completed[i]) {
      const m=document.createElement("div");
      m.className="message";
      m.innerText=d.message;
      card.appendChild(m);
    }

    container.appendChild(card);
  });
}

render();
</script>
</body>
</html>
